# О проекте

**CRM-система** - веб-приложение для управления клиентами.

Приложение помогает **автоматизировать** процессы привлечения клиентов, обработки обращений и составления контрактов.

## Основные функции приложения:

* авторизация пользователя;
* создание, редактирование и просмотр предоставляемых услуг;
* создание, редактирование и просмотр рекламных кампаний;
* создание, редактирование и просмотр потенциальных клиентов;
* создание, редактирование и просмотр контракта для клиента;
* перевод потенциального клиента в активного;
* подсчёт и отображение статистики по рекламным кампаниям: сколько привлечено потенциальных клиентов, сколько из них перешло в активных, соотношение стоимости контрактов к затратам на рекламные кампании.

### Роли пользователей в CRM-системе:

* **администратор** — создаёт пользователей и назначает им роли;
* **оператор** — создаёт записи о потенциальных клиентах;
* **маркетолог** — создаёт записи о предоставляемых услугах и о проводимых рекламных кампаниях;
* **менеджер** — работает с потенциальными клиентами, создаёт контракты и переводит потенциальных клиентов в активные.

### CRM-cистема рассчитывает статистику успешности рекламных кампаний и учитывает несколько факторов:

* количество потенциальных клиентов, заинтересовавшихся рекламой;
* количество переходов клиентов из потенциальных в активные;
* объёмы продаж по клиентам.

CRM-система позволяет эффективно управлять процессом работы с клиентами, отслеживать результативность рекламных кампаний и повышать общую продуктивность бизнеса.

## Развертываение проекта

### Необходимая инфраструктура
Для подготовки и запуска проекта необходимы:
* OS: linux
* VCS: git
* docker
* python (>=3.12, <4.0)
* poetry

### Клонирование проекта
Скопируйте проект командой:
```
git clone https://github.com/engineer-developer/CRM-system.git
```

### Создание и активирование виртуального окружения
Для создания виртуального окружения выполните команду:
```
python -m venv .venv
```

Активируйте виртуальное окружение командой:
```
source .venv/bin/activate
```

### Установка зависимостей
Для установки необходимых зависимостей выполните команду:
```
poetry install
```

### Настройка переменных окружения
Переименуйте файл .env.example в .env \
Можно использовать команду:
```
mv .env.example .env
```
Заполните файл .env актуальными данными.

### Подготовка базы данных и прокси сервера 

Для хранения информации используется реляционная база данных PostgreSQL.\
Для приема запросов, их обработки и возвращения ответов используется прокси сервер Nginx. 

Для запуска этих сервисов необходим Docker.\
Выполните следующую команду:
```
docker compose up -d
```

## Запуск приложения 
Перейдите в каталог crm_system/
```
cd crm_system/
```

### Существует два варианта запуска приложения
1. Вариант запуска с тестовыми данными
2. Вариант запуска с пустой базой данных


#### 1. Вариант запуска с тестовыми данными
Для оценки функционала приложения нужно наполнить базу данными из фикстуры. \
Для этого выполните следующую команду:
```
python manage.py loaddata fixtures/db_data_full.json
```
| Существующие пользователи       |     Пароль      | Права                                                                                                 |
|:--------------------------------|:---------------:|:------------------------------------------------------------------------------------------------------|
| admin                           |       123       | неограниченные                                                                                        |
| administrator1                  |       123       | создаёт пользователей и назначает им роли                                                             |
| operator1                       |       123       | создаёт записи о потенциальных клиентах	                                                              |
| marketer1                       |       123       | создаёт записи о предоставляемых услугах и о проводимых рекламных кампаниях	                          |
| manager1                        |       123       | работает с потенциальными клиентами, создаёт контракты и переводит потенциальных клиентов в активные	 |

#### 2. Вариант запуска с пустой базой данных
Для создания необходимых для работы таблиц в базе данных выполните команду:
```
python manage.py migrate
```
Создайте суперпользователя командой:
```
python manage.py createsuperuser
```
Выполните первоначальный вход от имени суперпользователя. \
Создайте, необходимых для работы, пользователей с соответствующими ролями.


### Для запуска приложения используйте команду:
```
gunicorn --access-logfile - -b 0.0.0.0:8000 crm_core.wsgi
```
Приложение доступно по URL http://localhost



